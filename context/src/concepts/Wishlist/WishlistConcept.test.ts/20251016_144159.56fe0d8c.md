---
timestamp: 'Thu Oct 16 2025 14:41:59 GMT-0400 (Eastern Daylight Time)'
content_id: 56fe0d8c4b52a2d30f830fa5cbdcd86e79618324f82df8240480b842a716d3b3
---

# file: src\concepts\Wishlist\WishlistConcept.test.ts

```typescript
import {
  assert,
  assertEquals,
  assertExists,
  assertNotEquals,
} from "jsr:@std/assert";
import { testDb } from "@utils/database.ts";
import { Empty, ID } from "@utils/types.ts";
import WishlistConcept from "./WishlistConcept.ts";

const creatorA = "creator:Alice" as ID;
const creatorB = "creator:Bob" as ID;
const nonPost = "post:nonPost" as ID;

/**
 * Test Case 1
 * Demonstrates operational principle: wishlist is made for a user; user adds and removes places.
 */
Deno.test("Test Case 1 - operational principle", async () => {
  const [db, client] = await testDb();
  const wishlistConcept = new WishlistConcept(db);

  try {
    // 1. make wishlist for user
    const makeWishlist = await wishlistConcept.createWishlist({
      creator: creatorA,
    });
    assertNotEquals(
      "error" in makeWishlist,
      true,
      "Wishlist creation should not fail.",
    );
    const { wishlist: wishlist } = makeWishlist as { wishlist: ID };
    assertExists(wishlist);

    // 2. user adds places
    const makeAthens = await wishlistConcept.addPlace({
      user: creatorA,
      wishlist: wishlist,
      city: "Athens",
      region: "Attica",
      country: "Greece",
    });
    assertNotEquals(
      "error" in makeAthens,
      true,
      "Place addition should not fail.",
    );
    const { place: athens } = makeAthens as { place: ID };
    assertExists(athens);

    const makeTokyo = await wishlistConcept.addPlace({
      user: creatorA,
      wishlist: wishlist,
      city: "Tokyo",
      region: "Kanto",
      country: "Japan",
    });
    assertNotEquals(
      "error" in makeTokyo,
      true,
      "Place addition should not fail.",
    );
    const { place: tokyo } = makeTokyo as { place: ID };
    assertExists(tokyo);

    const makeNyc = await wishlistConcept.addPlace({
      user: creatorA,
      wishlist: wishlist,
      city: "New York City",
      region: "New York",
      country: "United States",
    });
    assertNotEquals(
      "error" in makeNyc,
      true,
      "Place addition should not fail.",
    );
    const { place: nyc } = makeNyc as { place: ID };
    assertExists(nyc);

    const places = await wishlistConcept._getPlaces({ user: creatorA });
    assertEquals(places.length, 3, "Wishlist should have 3 places.");

    // 3. user removes places
    const removeAthens = await wishlistConcept.removePlace({
      user: creatorA,
      wishlist: wishlist,
      place: athens,
    });
    assertNotEquals(
      "error" in removeAthens,
      true,
      "Place deletion should not fail.",
    );
    const removeNyc = wishlistConcept.removePlace({
      user: creatorA,
      wishlist: wishlist,
      place: nyc,
    });
    assertNotEquals(
      "error" in removeNyc,
      true,
      "Place deletion should not fail.",
    );

    const newPlaces = await wishlistConcept._getPlaces({ user: creatorA });
    assertEquals(newPlaces.length, 1, "Wishlist should have 1 place.");
  } finally {
    await client.close();
  }
});

```
