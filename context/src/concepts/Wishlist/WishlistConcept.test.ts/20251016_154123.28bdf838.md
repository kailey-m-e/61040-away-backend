---
timestamp: 'Thu Oct 16 2025 15:41:23 GMT-0400 (Eastern Daylight Time)'
content_id: 28bdf838595e78b1a7d2b1c27f925f87f0132a0a5a5180ed00f130de7831a489
---

# file: src\concepts\Wishlist\WishlistConcept.test.ts

```typescript
import {
  assert,
  assertEquals,
  assertExists,
  assertNotEquals,
} from "jsr:@std/assert";
import { testDb } from "@utils/database.ts";
import { Empty, ID } from "@utils/types.ts";
import WishlistConcept from "./WishlistConcept.ts";
import { freshID } from "@utils/database.ts";

const creatorA = "creator:Alice" as ID;
const creatorB = "creator:Bob" as ID;
const nonPlace = "place:nonPlace" as ID;

/**
 * Test Case 1
 * Demonstrates operational principle: user adds and removes places.
 */
Deno.test("Test Case 1 - operational principle", async () => {
  const [db, client] = await testDb();
  const wishlistConcept = new WishlistConcept(db);

  try {
    // 1. user adds places
    const makeAthens = await wishlistConcept.addPlace({
      user: creatorA,
      city: "Athens",
      region: "Attica",
      country: "Greece",
    });
    assertNotEquals(
      "error" in makeAthens,
      true,
      "Place addition should not fail.",
    );
    const { place: athens } = makeAthens as { place: ID };
    assertExists(athens);

    const makeTokyo = await wishlistConcept.addPlace({
      user: creatorA,
      city: "Tokyo",
      region: "Kanto",
      country: "Japan",
    });
    assertNotEquals(
      "error" in makeTokyo,
      true,
      "Place addition should not fail.",
    );
    const { place: tokyo } = makeTokyo as { place: ID };
    assertExists(tokyo);

    const makeNyc = await wishlistConcept.addPlace({
      user: creatorA,
      city: "New York City",
      region: "New York",
      country: "United States",
    });
    assertNotEquals(
      "error" in makeNyc,
      true,
      "Place addition should not fail.",
    );
    const { place: nyc } = makeNyc as { place: ID };
    assertExists(nyc);

    const places = await wishlistConcept._getPlaces({ user: creatorA });
    assertEquals(places.length, 3, "Wishlist should have 3 places.");

    // 2. user removes places
    const removeAthens = await wishlistConcept.removePlace({
      user: creatorA,
      place: athens,
    });
    assertNotEquals(
      "error" in removeAthens,
      true,
      "Place deletion should not fail.",
    );
    const removeNyc = wishlistConcept.removePlace({
      user: creatorA,
      place: nyc,
    });
    assertNotEquals(
      "error" in removeNyc,
      true,
      "Place deletion should not fail.",
    );

    const newPlaces = await wishlistConcept._getPlaces({ user: creatorA });
    assertEquals(newPlaces.length, 1, "Wishlist should have 1 place.");
  } finally {
    await client.close();
  }
});

/**
 * Test Case 2
 * Demonstrates user tries to remove place that was never added
 */
Deno.test("Test Case 2", async () => {
  const [db, client] = await testDb();
  const wishlistConcept = new WishlistConcept(db);

  try {
    // 1. user tries to remove place that was never added
    const removePlace = wishlistConcept.removePlace({
      user: creatorA,
      place: nonPlace,
    });
    assertEquals(
      "error" in removePlace,
      true,
      "Removing nonexistant place should fail.",
    );
  } finally {
    await client.close();
  }
});

/**
 * Test Case 3
 * Demonstrates user tries to remove another user's place
 */
Deno.test("Test Case 3", async () => {
  const [db, client] = await testDb();
  const wishlistConcept = new WishlistConcept(db);

  try {
  } finally {
    await client.close();
  }
});

/**
 * Test Case 4
 * Demonstrates multiple users add and delete places
 */
Deno.test("Test Case 4", async () => {
  const [db, client] = await testDb();
  const wishlistConcept = new WishlistConcept(db);

  try {
  } finally {
    await client.close();
  }
});

```
